# File for configuring project / deployment build, push and pull steps

# Generic metadata about this project
name: zoom_mlops
prefect-version: 3.4.25

# build section allows you to manage and build docker images
build: null
#build:
#  - prefect.deployments.steps.pip_install_requirements:
#      requirements_file: requirements.txt

# push section allows you to manage if and how this project is uploaded to remote locations
push: null

# pull section allows you to provide instructions for cloning this project in remote locations
pull:
- prefect.deployments.steps.git_clone:
    repository: https://github.com/a-mohan1/mlops-zc-prefect.git
    branch: main
    access_token: null
    id: clone_step
# The steps below are only needed for prefect cloud with prefect:managed workpool
- prefect.deployments.steps.run_shell_script:
    script: |
        pwd
        ls
        echo "--- Looking for requirements.txt ---"
        find . -name "requirements.txt"
    stream_output: true
- prefect.deployments.steps.pip_install_requirements:
    directory: "{{ clone_step.directory }}"
    requirements_file: requirements.txt
    stream_output: true
#- prefect.deployments.steps.run_shell_script:
#    script: pip install -r requirements.txt
#    stream_output: true